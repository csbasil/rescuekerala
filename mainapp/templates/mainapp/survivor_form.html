{% extends 'base.html' %}
{% load bootstrap3 %}
{% load static %}
{% block content %}
  <div style="width:100%;">
    {% if messages %}
    <div class="alert alert-success alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>

        {% for message in messages %}
          <h3>{{ message }}</h3>
        {% endfor %}
    </div>
    {% endif %}
      <h3 class="text-center text-danger">Add Survived Family</h3>
  <form action="" method="post" class="form">
        {% csrf_token %}
        {% bootstrap_form form %}
        <h3>Family Member Details</h3>
        <table class="table">
            {{ familymembers.management_form }}

            {% for form in familymembers.forms %}
                {% if forloop.first %}
                    <thead>
                    <tr>
                        {% for field in form.visible_fields %}
                            <th>{{ field.label|capfirst }}</th>
                        {% endfor %}
                    </tr>
                    </thead>
                {% endif %}
                <tr class="formset_row">
                    {% for field in form.visible_fields %}
                        <td>
                            {# Include the hidden fields in the form #}
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
        <input class="btn btn-success" type="submit" value="Submit Details"/>
    </form>
  </div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'js/jquery.formset.js' %}"></script>
<script type="text/javascript">
    $('.formset_row').formset({
        addText: '<button class="btn btn-info"> Add Family Member </button>',
        deleteText: '<span class="text-danger">{% bootstrap_icon "remove" %}</span>',
        prefix: 'familymember_set'
    });
</script>

{% endblock %}
